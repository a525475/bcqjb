import{k as C,y,s as x,r as k,l as I,b as c,w as s,u as a,ad as F,d as l,a as f,af as t,ae as n,ah as h,ag as B,n as V,j as b,N as z,B as v,i as g}from"./index-wKIbGhGo.js";import{C as R}from"./CloudUpload-bfszKK-e.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"optional-fields"},S={class:"form-actions"},$=C({__name:"manual",emits:["cancel","ok"],setup(j,{emit:T}){const d=T,_=()=>{d("cancel")},i=y(),p=x(),w=k(),u=k(!1),e=I({name:"",base64Token:"",server:"",wsUrl:""}),N={name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:1,max:50,message:"名称长度应在1到50个字符之间",trigger:"blur"}],base64Token:[{required:!0,message:"请输入Token字符串",trigger:"blur"},{min:20,message:"Token字符串长度应至少20个字符",trigger:"blur"}]},U=()=>{u.value=!0;try{i.addToken({name:e.name,token:e.base64Token,server:e.server,wsUrl:e.wsUrl}),p.success("Token添加成功"),e.name="",e.base64Token="",e.server="",e.wsUrl="",d("ok")}catch(m){p.error(`添加Token失败: ${m.message||m}`)}finally{u.value=!1}};return(m,o)=>(g(),c(a(F),{ref_key:"importFormRef",ref:w,model:e,rules:N,"label-placement":"top",size:"large","show-label":!0},{default:s(()=>[l(a(n),{label:"游戏角色名称",path:"name","show-label":!0},{default:s(()=>[l(a(t),{value:e.name,"onUpdate:value":o[0]||(o[0]=r=>e.name=r),placeholder:"例如：主号战士",clearable:""},null,8,["value"])]),_:1}),l(a(n),{label:"Token字符串",path:"base64Token","show-label":!0},{default:s(()=>[l(a(t),{value:e.base64Token,"onUpdate:value":o[1]||(o[1]=r=>e.base64Token=r),type:"textarea",rows:3,placeholder:"粘贴Token字符串...",clearable:""},null,8,["value"])]),_:1}),l(a(B),null,{default:s(()=>[l(a(h),{title:"角色详情 (可选)",name:"optional"},{default:s(()=>[f("div",M,[l(a(n),{label:"服务器"},{default:s(()=>[l(a(t),{value:e.server,"onUpdate:value":o[2]||(o[2]=r=>e.server=r),placeholder:"服务器名称"},null,8,["value"])]),_:1}),l(a(n),{label:"自定义连接地址"},{default:s(()=>[l(a(t),{value:e.wsUrl,"onUpdate:value":o[3]||(o[3]=r=>e.wsUrl=r),placeholder:"留空使用默认连接"},null,8,["value"])]),_:1})])]),_:1})]),_:1}),f("div",S,[l(a(v),{type:"primary",size:"large",block:"",loading:u.value,onClick:U},{icon:s(()=>[l(a(z),null,{default:s(()=>[l(a(R))]),_:1})]),default:s(()=>[o[4]||(o[4]=b(" 添加Token ",-1))]),_:1},8,["loading"]),a(i).hasTokens?(g(),c(a(v),{key:0,size:"large",block:"",onClick:_},{default:s(()=>[...o[5]||(o[5]=[b(" 取消 ",-1)])]),_:1})):V("",!0)])]),_:1},8,["model"]))}}),G=q($,[["__scopeId","data-v-ed5add4b"]]);export{G as default};
